(()=>{"use strict";const t=function(t){t.preventDefault();var e=t.target.closest("a").getAttribute("href");document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})},e=function(t,e){var n=document.querySelector("".concat(t)),o=document.createElement("div");n.addEventListener("submit",(function(t){if(t.preventDefault(),e.validate()){n.appendChild(o),o.innerHTML="<div></div><div></div><div></div><div></div>",o.classList="lds-ellipsis";var a=new FormData(n),l={};a.forEach((function(t,e){l[e]=t})),s(l).then((function(t){if(200!==t.status)throw new Error("Возникла ошибка при отправки данных");r()})).catch(i)}}));var r=function(){o.style.cssText="font-size: 2rem; color: #fff;",o.innerHTML="",o.textContent="Спасибо, мы скоро с Вами свяжемся!",setTimeout((function(){o.style.transition="1000ms",o.style.opacity="0",o.addEventListener("transitionend",(function(t){t.target.closest(".popup")&&(t.target.closest(".popup").style.display="none"),o.style.cssText="",o.remove()}),{once:!0})}),3e3),o.classList.remove("lds-ellipsis"),n.querySelectorAll("input").forEach((function(t){t.value=""}))},i=function(t){o.style.cssText="font-size: 2rem;",o.innerHTML="",o.textContent="Что-то пошло не так...",o.classList.remove("lds-ellipsis"),console.error(t)},s=function(t){return fetch("server.php",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}};function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const r=function(){function t(e){var o,r=e.selector,i=e.pattern,s=void 0===i?{}:i,a=e.method;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=document.querySelector(r),this.pattern=s,this.method=a,this.selector=r,this.elementsForm=(o=this.form.elements,function(t){if(Array.isArray(t))return n(t)}(o)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(t){return"button"!==t.tagName.toLowerCase()&&"button"!==t.type})),this.error=new Set}var e,r;return e=t,(r=[{key:"init",value:function(){var t=this;this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(e){return e.addEventListener("change",t.checkIt.bind(t))})),this.form.addEventListener("submit",(function(e){return e.preventDefault(),t.elementsForm.forEach((function(e){return t.checkIt({target:e})})),t.error.size?(e.preventDefault(),!1):(t.elementsForm.forEach((function(t){t.classList.remove("success"),t.classList.remove("error")})),!0)}))}},{key:"validate",value:function(){var t=this;return this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(e){return e.addEventListener("change",t.checkIt.bind(t))})),this.elementsForm.forEach((function(e){return t.checkIt({target:e})})),!this.error.size&&(this.elementsForm.forEach((function(t){t.classList.remove("success"),t.classList.remove("error")})),!0)}},{key:"isValid",value:function(t){var e=this,n={notEmpty:function(t){return""!==t.value.trim()},pattern:function(t,e){return e.test(t.value)}};if(this.method){var o=this.method[t.id];if(o)return o.every((function(o){return n[o[0]](t,e.pattern[o[1]])}))}else console.warn("Необходимо передать id полей ввода и методы проверки этих полей");return!0}},{key:"checkIt",value:function(t){var e=t.target;this.isValid(e)?(this.showSuccess(e),this.error.delete(e)):(this.showError(e),this.error.add(e))}},{key:"showError",value:function(t){if(t.classList.remove("success"),t.classList.add("error"),!t.nextElementSibling||!t.nextElementSibling.classList.contains("validator-error")){var e=document.createElement("div");e.textContent="Ошибка в этом поле",e.classList.add("validator-error"),t.insertAdjacentElement("afterend",e)}}},{key:"showSuccess",value:function(t){t.classList.remove("error"),t.classList.add("success"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error")&&t.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var t=document.createElement("style");t.textContent="\n\t\t\tinput.success {\n\t\t\t\t-webkit-box-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\t-moz-box-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\tbox-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\ttransition: 300ms;\n\t\t\t}\n\t\t\tinput.error {\n\t\t\t\t-webkit-box-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\t-moz-box-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\tbox-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\ttransition: 300ms;\n\t\t\t}\n\t\t\t.validator-error {\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-family: sans-serif;\n\t\t\t\tcolor: red;\n\t\t\t\ttransform: translateX(50%) translateY(-2rem);\n\t\t\t\tposition: absolute;\n\t\t\t\tuser-select: none; \n\t\t\t}\n\t\t",document.head.appendChild(t)}},{key:"setPattern",value:function(){this.pattern.phone||(this.pattern.phone=/^\+?\d{7,13}$/),this.pattern.email||(this.pattern.email=/^\w+@\w+\.\w{2,3}$/),this.pattern.name||(this.pattern.name=/^[а-яё ]{2,}/i),this.pattern.text||(this.pattern.text=/^[а-яё .,!?;:'"-]+/i)}}])&&o(e.prototype,r),t}();function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const a=function(){function t(e){var n=e.main,o=e.wrap,r=e.prev,i=e.next,s=e.position,a=void 0===s?0:s,l=e.slidesToShow,c=void 0===l?4:l,u=e.infinity,d=void 0!==u&&u,m=e.responsive,p=void 0===m?[]:m;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.main=document.querySelector(n),this.wrap=document.querySelector(o),this.next=document.querySelector(i),this.prev=document.querySelector(r),this.slides=this.wrap.children,this.slidesToShow=c,this.options={position:a,infinity:d,slideWidth:Math.floor(100/this.slidesToShow*10)/10},this.responsive=p}var e,n;return e=t,(n=[{key:"init",value:function(){this.addGloClass(),this.addStyle.call(this),this.prev&&this.next||this.addArrow(),this.controlSlider(),this.responsive&&this.responseInit.call(this)}},{key:"addGloClass",value:function(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(this.slides);try{for(e.s();!(t=e.n()).done;)t.value.classList.add("glo-slider__item")}catch(t){e.e(t)}finally{e.f()}}},{key:"addStyle",value:function(){var t=document.getElementById("sliderCarousel-style");t||((t=document.createElement("style")).id="sliderCarousel-style"),t.textContent="\n\t\t\t.glo-slider {\n\t\t\t\tposition: relative;\n\t\t\t\toverflow: hidden !important;\n\t\t\t}\n\t\t\t.glo-slider__wrap {\n\t\t\t\tdisplay: flex !important;\n\t\t\t\ttransition: transform 0.3s !important;\n\t\t\t\twill-change: transform !important;\n\t\t\t}\n\t\t\t.glo-slider__item {\n\t\t\t\tflex: 0 0 ".concat(this.options.slideWidth,"% !important;\n\t\t\t\tmargin: auto 0 !important;\n\t\t\t}\n\t\t"),document.head.appendChild(t)}},{key:"controlSlider",value:function(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}},{key:"prevSlider",value:function(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slides.length-this.slidesToShow),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.slideWidth,"%)"))}},{key:"nextSlider",value:function(){(this.options.infinity||this.options.position<this.slides.length-this.slidesToShow)&&(++this.options.position,this.options.position>this.slides.length-this.slidesToShow&&(this.options.position=0),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.slideWidth,"%)"))}},{key:"addArrow",value:function(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.classList="glo-slider__prev",this.next.classList="glo-slider__next",this.main.appendChild(this.prev),this.main.appendChild(this.next);var t=document.createElement("style");t.textContent="\n\t\t\t.glo-slider__prev, .glo-slider__next {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 50%;\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t\twidth: 40px;\n\t\t\t\theight: 40px;\n\t\t\t\tbackground-color: rgba(0, 0, 0, .5);\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-size: 30px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tborder: none;\n\t\t\t}\n\t\t\t.glo-slider__prev {\n\t\t\t\tleft: 20px;\n\t\t\t\tbackground-image: url(../images/icons/left-arrow.svg);\n\t\t\t\tbackground-position: 50% 50%;\n\t\t\t}\n\t\t\t.glo-slider__next {\n\t\t\t\tright: 20px;\n\t\t\t\tbackground-image: url(../images/icons/right-arrow.svg);\n\t\t\t\tbackground-position: 50% 50%;\n\t\t\t}\n\t\t\t.glo-slider__prev:hover,\n\t\t\t.glo-slider__next:hover, \n\t\t\t.glo-slider__prev:focus, \n\t\t\t.glo-slider__next:focus {\n\t\t\t\toutline: none;\n\t\t\t}\n\t\t",document.head.appendChild(t)}},{key:"responseInit",value:function(){var t=this,e=this.slidesToShow,n=this.responsive.map((function(t){return t.breakpoint})).sort((function(t,e){return t-e})),o=function(){var o,r=document.documentElement.clientWidth,i=n.find((function(t){if(t>r)return t}));i?(t.responsive.find((function(t,e){if(t.breakpoint===i)return o=e,!0})),t.slidesToShow=t.responsive[o].slidesToShow,t.options.slideWidth=Math.floor(100/t.slidesToShow*10)/10,t.wrap.style.transform="translateX(-0%)",t.addStyle()):(t.slidesToShow=e,t.options.slideWidth=Math.floor(100/t.slidesToShow*10)/10,t.wrap.style.transform="translateX(-0%)",t.addStyle())};o(),window.addEventListener("resize",o)}}])&&s(e.prototype,n),t}();var l,c,u,d,m,p,h,f,v,y,g,b,w,x;(function(t){var e,n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds"),i=a();function s(t){return(t=t.toString()).length<=1?"0"+t:t}function a(){var e=new Date(t).getTime(),n=(new Date).getTime(),o=Math.ceil((e-n)/1e3),r=s(Math.floor(o%60)),i=s(Math.floor(o/60%60));return{timeRemaining:o,hours:s(Math.floor(o/60/60)),minutes:i,seconds:r}}function l(){i=a(),n.textContent=i.hours,o.textContent=i.minutes,r.textContent=i.seconds,i.timeRemaining<=0&&clearInterval(e)}i.timeRemaining>0?(l(),e=setInterval(l,1e3)):(n.textContent="00",o.textContent="00",r.textContent="00")})((new Date).getTime()+52342e3),document.querySelector("main>a").addEventListener("click",(function(e){t(e)})),w=document.querySelector("menu"),x=function(){w.classList.toggle("active-menu")},document.querySelector("body").addEventListener("click",(function(e){w.classList.contains("active-menu")?e.target.closest(".active-menu")&&!e.target.matches(".active-menu a")||(e.target.matches(".active-menu>ul>li>a")&&t(e),x()):e.target.closest(".menu")&&x()})),h=document.querySelector(".popup"),f=document.querySelectorAll(".popup-btn"),v=document.querySelector(".popup-content"),y=-50,g=0,b=function t(){p=requestAnimationFrame(t),y<20||g<1?(y<20&&(y+=2,v.style.top=y+"%"),g<1&&(g+=.05,h.style.opacity=g)):(y=-50,g=0,cancelAnimationFrame(p))},f.forEach((function(t){t.addEventListener("click",(function(){h.style.display="block",screen.width>=768&&(p=requestAnimationFrame(b))}))})),h.addEventListener("click",(function(t){(t.target===h||t.target.matches(".popup-close"))&&(h.style.display="none")})),u=document.querySelector(".service-header"),d=u.querySelectorAll(".service-header-tab"),m=document.querySelectorAll(".service-tab"),u.addEventListener("click",(function(t){var e=t.target;(e=e.closest(".service-header-tab"))&&d.forEach((function(t,n){t===e&&function(t){for(var e=0;e<m.length;e++)t===e?(d[e].classList.add("active"),m[e].classList.remove("d-none")):(d[e].classList.remove("active"),m[e].classList.add("d-none"))}(n)}))})),function(){var t,e,n=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-content"),r=0;!function(){var t=n.length,o=document.createElement("li"),r=document.querySelector(".portfolio-dots");o.classList.add("dot");do{r.insertAdjacentElement("beforeend",o.cloneNode()),t--}while(t>0);(e=document.querySelectorAll(".dot"))[0].classList.add("dot-active")}();var i=function(t,e,n){t[e].classList.remove(n)},s=function(t,e,n){t[e].classList.add(n)},a=function(){i(n,r,"portfolio-item-active"),i(e,r,"dot-active"),++r>=n.length&&(r=0),s(n,r,"portfolio-item-active"),s(e,r,"dot-active")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;t=setInterval(a,e)};o.addEventListener("click",(function(t){t.preventDefault();var o=t.target;o.matches(".portfolio-btn, .dot")&&(i(n,r,"portfolio-item-active"),i(e,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&e.forEach((function(t,e){t===o&&(r=e)})),r>=n.length&&(r=0),r<0&&(r=n.length-1),s(n,r,"portfolio-item-active"),s(e,r,"dot-active"))})),o.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(t)})),o.addEventListener("mouseout",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&l(1500)})),l(1500)}(),new a({wrap:".companies-hor",main:".companies-wrapper",slidesToShow:6,infinity:!0,responsive:[{breakpoint:1024,slidesToShow:4},{breakpoint:768,slidesToShow:3},{breakpoint:576,slidesToShow:2}]}).init(),l=document.querySelectorAll(".command__photo"),c=function(t){var e=t.target.getAttribute("src");t.target.setAttribute("src",t.target.dataset.img),t.target.dataset.img=e},l.forEach((function(t){t.addEventListener("mouseenter",c),t.addEventListener("mouseleave",c)})),document.addEventListener("input",(function(t){var e=t.target.closest("input");if(e){if(e.classList.contains("calc-item"))return void(e.value=e.value.replace(/[^\d]/g,""));switch(e.getAttribute("name")){case"user_name":e.value=e.value.replace(/[^а-яё ]/gi,"");break;case"user_message":e.value=e.value.replace(/[^а-яё .,!?;:'"-]/gi,"");break;case"user_email":e.value=e.value.replace(/[^\w'*~!.@-]/gi,"");break;case"user_phone":e.value=e.value.replace(/[^\d+]/gi,"")}}})),document.addEventListener("blur",(function(t){var e=t.target.closest("input");if(e&&""!==e.value&&e.getAttribute("name")&&(e.getAttribute("name").match(/^user_(name|message|email|phone)$/)&&(e.value=e.value.replace(/^(-| ){1,}|(-| ){1,}$/g,""),e.value=e.value.replace(/-{2,}/g,"-"),e.value=e.value.replace(/ {2,}/g," ")),"user_name"===e.getAttribute("name"))){var n=e.value.match(/[^ |-]{1,}/g);n.forEach((function(t,o){var r;if(t=t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase(),0===o)r=new RegExp(t,"i");else if(o===n.length-1)r=new RegExp(t+"$","i");else{r=new RegExp("[^а-яё]"+t+"[^а-яё]","ig");var i=e.value.match(r)[0];t=i.slice(0,2).toUpperCase()+i.slice(2).toLowerCase()}e.value=e.value.replace(r,t)}))}}),!0);var S=new r({selector:"#form1",method:{"form1-phone":[["notEmpty"],["pattern","phone"]],"form1-email":[["notEmpty"],["pattern","email"]],"form1-name":[["notEmpty"],["pattern","name"]]}}),E=new r({selector:"#form2",method:{"form2-phone":[["notEmpty"],["pattern","phone"]],"form2-email":[["notEmpty"],["pattern","email"]],"form2-name":[["notEmpty"],["pattern","name"]],"form2-message":[["notEmpty"],["pattern","text"]]}}),L=new r({selector:"#form3",method:{"form3-phone":[["notEmpty"],["pattern","phone"]],"form3-email":[["notEmpty"],["pattern","email"]],"form3-name":[["notEmpty"],["pattern","name"]]}});(function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),i=document.querySelector(".calc-day"),s=document.querySelector(".calc-count"),a=function(t){var e,n=document.getElementById("total"),o=Math.abs(t-+n.textContent),r=!1,i=function(){s(),a()},s=function(){+n.textContent<t?(n.textContent=Math.floor(+n.textContent+o/20),+n.textContent>=t&&(n.textContent=t,cancelAnimationFrame(e),r=!0)):+n.textContent>t&&(n.textContent=Math.floor(+n.textContent-o/20),+n.textContent<=t&&(n.textContent=t,cancelAnimationFrame(e),r=!0))},a=function(){r||(e=requestAnimationFrame(i))};a()},l=function(){var t=0,n=1,l=1,c=+o.options[o.selectedIndex].value,u=+r.value;s.value>1&&(n+=(s.value-1)/10),i.value&&i.value<5?l*=2:i.value&&i.value<10&&(l*=1.5),c&&u?(t=Math.round(e*c*u*n*l),a(t)):a(t)};n.addEventListener("input",(function(e){var n=e.target;(n.matches("select")||n.matches("input"))&&(clearTimeout(t),t=setTimeout(l,300))}))})(100),e("#form1",S),e("#form2",E),e("#form3",L)})();