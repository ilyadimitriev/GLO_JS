(()=>{"use strict";const t=t=>{t.preventDefault();const e=t.target.closest("a").getAttribute("href");document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})},e=(t,e)=>{const n=document.querySelector(`${t}`),o=document.createElement("div");n.addEventListener("submit",(t=>{if(t.preventDefault(),e.validate()){n.appendChild(o),o.innerHTML="<div></div><div></div><div></div><div></div>",o.classList="lds-ellipsis";const t=new FormData(n),e={};t.forEach(((t,n)=>{e[n]=t})),a(e).then((t=>{if(200!==t.status)throw new Error("Возникла ошибка при отправки данных");s()})).catch(r)}}));const s=()=>{o.style.cssText="font-size: 2rem; color: #fff;",o.innerHTML="",o.textContent="Спасибо, мы скоро с Вами свяжемся!",setTimeout((()=>{o.style.transition="1000ms",o.style.opacity="0",o.addEventListener("transitionend",(t=>{t.target.closest(".popup")&&(t.target.closest(".popup").style.display="none"),o.style.cssText="",o.remove()}),{once:!0})}),3e3),o.classList.remove("lds-ellipsis"),n.querySelectorAll("input").forEach((t=>{t.value=""}))},r=t=>{o.style.cssText="font-size: 2rem;",o.innerHTML="",o.textContent="Что-то пошло не так...",o.classList.remove("lds-ellipsis"),console.error(t)},a=t=>fetch("server.php",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})},n=class{constructor({selector:t,pattern:e={},method:n}){this.form=document.querySelector(t),this.pattern=e,this.method=n,this.selector=t,this.elementsForm=[...this.form.elements].filter((t=>"button"!==t.tagName.toLowerCase()&&"button"!==t.type)),this.error=new Set}init(){this.applyStyle(),this.setPattern(),this.elementsForm.forEach((t=>t.addEventListener("change",this.checkIt.bind(this)))),this.form.addEventListener("submit",(t=>(t.preventDefault(),this.elementsForm.forEach((t=>this.checkIt({target:t}))),this.error.size?(t.preventDefault(),!1):(this.elementsForm.forEach((t=>{t.classList.remove("success"),t.classList.remove("error")})),!0))))}validate(){return this.applyStyle(),this.setPattern(),this.elementsForm.forEach((t=>t.addEventListener("change",this.checkIt.bind(this)))),this.elementsForm.forEach((t=>this.checkIt({target:t}))),!this.error.size&&(this.elementsForm.forEach((t=>{t.classList.remove("success"),t.classList.remove("error")})),!0)}isValid(t){const e={notEmpty:t=>""!==t.value.trim(),pattern:(t,e)=>e.test(t.value)};if(this.method){const n=this.method[t.id];if(n)return n.every((n=>e[n[0]](t,this.pattern[n[1]])))}else console.warn("Необходимо передать id полей ввода и методы проверки этих полей");return!0}checkIt(t){const e=t.target;this.isValid(e)?(this.showSuccess(e),this.error.delete(e)):(this.showError(e),this.error.add(e))}showError(t){if(t.classList.remove("success"),t.classList.add("error"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error"))return;const e=document.createElement("div");e.textContent="Ошибка в этом поле",e.classList.add("validator-error"),t.insertAdjacentElement("afterend",e)}showSuccess(t){t.classList.remove("error"),t.classList.add("success"),t.nextElementSibling&&t.nextElementSibling.classList.contains("validator-error")&&t.nextElementSibling.remove()}applyStyle(){const t=document.createElement("style");t.textContent="\n\t\t\tinput.success {\n\t\t\t\t-webkit-box-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\t-moz-box-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\tbox-shadow: 0px 0px 62px -39px rgba(25, 181, 254, 1) inset;\n\t\t\t\ttransition: 300ms;\n\t\t\t}\n\t\t\tinput.error {\n\t\t\t\t-webkit-box-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\t-moz-box-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\tbox-shadow: 0px 0px 64px -29px rgba(255, 0, 0, 1) inset;\n\t\t\t\ttransition: 300ms;\n\t\t\t}\n\t\t\t.validator-error {\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-family: sans-serif;\n\t\t\t\tcolor: red;\n\t\t\t\ttransform: translateX(50%) translateY(-2rem);\n\t\t\t\tposition: absolute;\n\t\t\t\tuser-select: none; \n\t\t\t}\n\t\t",document.head.appendChild(t)}setPattern(){this.pattern.phone||(this.pattern.phone=/^\+?\d{7,13}$/),this.pattern.email||(this.pattern.email=/^\w+@\w+\.\w{2,3}$/),this.pattern.name||(this.pattern.name=/^[а-яё ]{2,}/i),this.pattern.text||(this.pattern.text=/^[а-яё .,!?;:'"-]+/i)}};(function(t){const e=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");let s,r=i();function a(t){return(t=t.toString()).length<=1?"0"+t:t}function i(){const e=new Date(t).getTime(),n=(new Date).getTime(),o=Math.ceil((e-n)/1e3),s=a(Math.floor(o%60)),r=a(Math.floor(o/60%60));return{timeRemaining:o,hours:a(Math.floor(o/60/60)),minutes:r,seconds:s}}function c(){r=i(),e.textContent=r.hours,n.textContent=r.minutes,o.textContent=r.seconds,r.timeRemaining<=0&&clearInterval(s)}r.timeRemaining>0?(c(),s=setInterval(c,1e3)):(e.textContent="00",n.textContent="00",o.textContent="00")})((new Date).getTime()+52342e3),document.querySelector("main>a").addEventListener("click",(e=>{t(e)})),(()=>{const e=document.querySelector("menu"),n=()=>{e.classList.toggle("active-menu")};document.querySelector("body").addEventListener("click",(o=>{let s;e.classList.contains("active-menu")?(s=o.target.closest(".active-menu"),s&&!o.target.matches(".active-menu a")||(o.target.matches(".active-menu>ul>li>a")&&t(o),n())):(s=o.target.closest(".menu"),s&&n())}))})(),(()=>{const t=document.querySelector(".popup"),e=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content");let o,s=-50,r=0;const a=()=>{o=requestAnimationFrame(a),s<20||r<1?(s<20&&(s+=2,n.style.top=s+"%"),r<1&&(r+=.05,t.style.opacity=r)):(s=-50,r=0,cancelAnimationFrame(o))};e.forEach((e=>{e.addEventListener("click",(()=>{t.style.display="block",screen.width>=768&&(o=requestAnimationFrame(a))}))})),t.addEventListener("click",(e=>{(e.target===t||e.target.matches(".popup-close"))&&(t.style.display="none")}))})(),(()=>{const t=document.querySelector(".service-header"),e=t.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");t.addEventListener("click",(t=>{let o=t.target;o=o.closest(".service-header-tab"),o&&e.forEach(((t,s)=>{t===o&&(t=>{for(let o=0;o<n.length;o++)t===o?(e[o].classList.add("active"),n[o].classList.remove("d-none")):(e[o].classList.remove("active"),n[o].classList.add("d-none"))})(s)}))}))})(),(()=>{const t=document.querySelectorAll(".portfolio-item"),e=document.querySelector(".portfolio-content");let n,o,s=0;(()=>{let e=t.length;const n=document.createElement("li"),s=document.querySelector(".portfolio-dots");n.classList.add("dot");do{s.insertAdjacentElement("beforeend",n.cloneNode()),e--}while(e>0);o=document.querySelectorAll(".dot"),o[0].classList.add("dot-active")})();const r=(t,e,n)=>{t[e].classList.remove(n)},a=(t,e,n)=>{t[e].classList.add(n)},i=()=>{r(t,s,"portfolio-item-active"),r(o,s,"dot-active"),s++,s>=t.length&&(s=0),a(t,s,"portfolio-item-active"),a(o,s,"dot-active")},c=(t=3e3)=>{n=setInterval(i,t)};e.addEventListener("click",(e=>{e.preventDefault();const n=e.target;n.matches(".portfolio-btn, .dot")&&(r(t,s,"portfolio-item-active"),r(o,s,"dot-active"),n.matches("#arrow-right")?s++:n.matches("#arrow-left")?s--:n.matches(".dot")&&o.forEach(((t,e)=>{t===n&&(s=e)})),s>=t.length&&(s=0),s<0&&(s=t.length-1),a(t,s,"portfolio-item-active"),a(o,s,"dot-active"))})),e.addEventListener("mouseover",(t=>{(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(n)})),e.addEventListener("mouseout",(t=>{(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&c(1500)})),c(1500)})(),(()=>{const t=document.querySelectorAll(".command__photo"),e=t=>{const e=t.target.getAttribute("src");t.target.setAttribute("src",t.target.dataset.img),t.target.dataset.img=e};t.forEach((t=>{t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",e)}))})(),document.addEventListener("input",(t=>{const e=t.target.closest("input");if(e){if(e.classList.contains("calc-item"))return void(e.value=e.value.replace(/[^\d]/g,""));switch(e.getAttribute("name")){case"user_name":e.value=e.value.replace(/[^а-яё ]/gi,"");break;case"user_message":e.value=e.value.replace(/[^а-яё .,!?;:'"-]/gi,"");break;case"user_email":e.value=e.value.replace(/[^\w'*~!.@-]/gi,"");break;case"user_phone":e.value=e.value.replace(/[^\d+]/gi,"")}}})),document.addEventListener("blur",(t=>{const e=t.target.closest("input");if(e&&""!==e.value&&e.getAttribute("name")&&(e.getAttribute("name").match(/^user_(name|message|email|phone)$/)&&(e.value=e.value.replace(/^(-| ){1,}|(-| ){1,}$/g,""),e.value=e.value.replace(/-{2,}/g,"-"),e.value=e.value.replace(/ {2,}/g," ")),"user_name"===e.getAttribute("name"))){const t=e.value.match(/[^ |-]{1,}/g);t.forEach(((n,o)=>{let s;if(n=n.slice(0,1).toUpperCase()+n.slice(1).toLowerCase(),0===o)s=new RegExp(n,"i");else if(o===t.length-1)s=new RegExp(n+"$","i");else{s=new RegExp("[^а-яё]"+n+"[^а-яё]","ig");const t=e.value.match(s)[0];n=t.slice(0,2).toUpperCase()+t.slice(2).toLowerCase()}e.value=e.value.replace(s,n)}))}}),!0);const o=new n({selector:"#form1",method:{"form1-phone":[["notEmpty"],["pattern","phone"]],"form1-email":[["notEmpty"],["pattern","email"]],"form1-name":[["notEmpty"],["pattern","name"]]}}),s=new n({selector:"#form2",method:{"form2-phone":[["notEmpty"],["pattern","phone"]],"form2-email":[["notEmpty"],["pattern","email"]],"form2-name":[["notEmpty"],["pattern","name"]],"form2-message":[["notEmpty"],["pattern","text"]]}}),r=new n({selector:"#form3",method:{"form3-phone":[["notEmpty"],["pattern","phone"]],"form3-email":[["notEmpty"],["pattern","email"]],"form3-name":[["notEmpty"],["pattern","name"]]}});((t=100)=>{const e=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),s=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),a=t=>{const e=document.getElementById("total"),n=Math.abs(t-+e.textContent);let o,s=!1;const r=()=>{a(),i()},a=()=>{+e.textContent<t?(e.textContent=Math.floor(+e.textContent+n/20),+e.textContent>=t&&(e.textContent=t,cancelAnimationFrame(o),s=!0)):+e.textContent>t&&(e.textContent=Math.floor(+e.textContent-n/20),+e.textContent<=t&&(e.textContent=t,cancelAnimationFrame(o),s=!0))},i=()=>{s||(o=requestAnimationFrame(r))};i()},i=()=>{let e=0,i=1,c=1;const l=+n.options[n.selectedIndex].value,m=+o.value;r.value>1&&(i+=(r.value-1)/10),s.value&&s.value<5?c*=2:s.value&&s.value<10&&(c*=1.5),l&&m?(e=Math.round(t*l*m*i*c),a(e)):a(e)};let c;e.addEventListener("input",(t=>{const e=t.target;(e.matches("select")||e.matches("input"))&&(clearTimeout(c),c=setTimeout(i,300))}))})(100),e("#form1",o),e("#form2",s),e("#form3",r)})();